(window["webpackJsonp_demo"]=window["webpackJsonp_demo"]||[]).push([["download_message"],{"4aed":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{type:"primary"},on:{click:e.downLoad}},[e._v("下载")]),n("el-button",{attrs:{type:"primary"},on:{click:e.uploadFile}},[e._v("原生上传")]),n("el-progress",{staticStyle:{width:"300px"},attrs:{percentage:e.percentage}}),n("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"/upLoadFile","http-request":e.upLoad,multiple:""}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.flag,expression:"flag"}],staticStyle:{border:"1px solid red"}},[n("Emotion",{on:{emotion:e.getEmotion}})],1),n("div",{ref:"box",staticStyle:{height:"200px",width:"400px",border:"1px solid red"},attrs:{id:"test",contenteditable:"true"},on:{paste:e.pastefunction}}),n("el-button",{attrs:{type:"primary"},on:{click:e.openFace}},[e._v("表情")])],1)},o=[],i=(n("cc16"),n("22b3"),n("425f"),n("7d72"),n("c19d"),n("bc4a"),n("c12e"),n("3b93"),n("48d1"),n("0059"),n("e8c4"),n("f969"),n("917d"),n("02fd"),n("0cf4"),n("ab7d"),n("73c1"),n("d861"),n("f911"),n("4779"),n("6d24"),n("999c"),n("9b0d"),n("b82d"),n("62c8"),n("52a3"),n("cad5"),n("1781"),n("35e9"),n("903a"),n("0df4"),n("89c2"),n("51087"),n("6a61"),n("4a97")),r=n("82ae"),c=n.n(r);n("4460"),n("960e"),n("b16e");function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pdf",a=new Blob([e]);if("undefined"!==typeof window.chrome){var o=document.createElement("a"),i=window.URL.createObjectURL(a);o.href=i,o.download=t+"."+n,o.click(),window.URL.revokeObjectURL(i)}else if("undefined"!==typeof window.navigator.msSaveBlob)a=new Blob([e],{type:"application/force-download"}),window.navigator.msSaveBlob(a,t+"."+n);else{var r=new File([e],t+"."+n,{type:"application/force-download"});i=window.URL.createObjectURL(r);window.open(i),window.URL.revokeObjectURL(i)}}function l(){var e=document.createElement("input");e.type="file",e.click(),e.onchange=function(){var t=e.files[0],n=new FormData;n.append("file",t),n.append("other","666666");var a=new XMLHttpRequest,o="/upLoadFile";a.open("POST",o),a.send(n),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status)JSON.parse(a.responseText)}}}var s={components:{Emotion:function(){return n.e("chunk-df695490").then(n.bind(null,"7f85"))}},data:function(){return{percentage:0,src:"",uploadFile:l,flag:!1}},mounted:function(){},methods:{openFace:function(){this.flag=!0},getEmotion:function(e){window.getSelection();document.execCommand("insertHTML",!1,e)},dataURLtoBlob:function(e){var t=e.split(","),n=t[0].match(/:(.*?);/)[1],a=atob(t[1]),o=a.length,i=new Uint8Array(o);while(o--)i[o]=a.charCodeAt(o);var r=new Blob([i],{type:n});return this.blobToFile(r,"123")},blobToFile:function(e,t){return e.lastModifiedDate=new Date,e.name=t,e},pastefunction:function(e){var t=this;if(e.clipboardData||e.originalEvent){e.preventDefault();for(var n=e.clipboardData||e.originalEvent.clipboardData,a=n.items,o=0,r=a.length;o<r;o++){if(-1!==a[o].type.indexOf("image")){var c=a[o].getAsFile();this.upLoad(c);break}if(-1!==a[o].type.indexOf("text")){var d=n.getData("text/plain");document.execCommand("insertText",!1,d);break}}}else{d=window.clipboardData.getData("text")||"";if(""!==d)if(e.preventDefault?e.preventDefault():e.returnValue=!1,window.getSelection){var l=document.createElement("span");l.innerHTML=d,window.getSelection().getRangeAt(0).insertNode(l)}else document.selection.createRange().pasteHTML(d);else setTimeout(Object(i["a"])(regeneratorRuntime.mark((function e(){var n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=document.querySelectorAll("#test img"),a=0,o=n.length;a<o;a++)-1==n[a].className.indexOf("my_img")&&(new FormData,i=t.dataURLtoBlob(n[a].src,"123"),t.upLoad(i));case 2:case"end":return e.stop()}}),e)}))),1)}},downLoad:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/download",{onDownloadProgress:function(e){t.percentage=Number((e.loaded/e.total*100).toFixed(0))},responseType:"blob"});case 2:n=e.sent,d(n.data,"p");case 4:case"end":return e.stop()}}),e)})))()},upLoad:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a="http://121.36.2.1:22222/admin/guest/file/uploadChatFile?creatorId=1002&customerId=1002",o=new FormData,o.append("file",e.file||e),n.next=5,c.a.post(a,o,{onUploadProgress:function(e){t.percentage=Number((e.loaded/e.total*100).toFixed(0))}});case 5:i=n.sent,r=i.data,document.execCommand("insertHtml",!1,'<img src="'.concat(r.data.path,'" alt="" style="width:80px;height:80px" >'));case 8:case"end":return n.stop()}}),n)})))()}}},p=s,u=(n("e611"),n("5d22")),f=Object(u["a"])(p,a,o,!1,null,null,null);t["default"]=f.exports},9907:function(e,t,n){},e611:function(e,t,n){"use strict";n("9907")}}]);